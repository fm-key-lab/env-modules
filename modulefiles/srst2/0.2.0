#%Module
##
## srst2 (v0.2.0)

proc ModulesHelp { } {
   puts stderr "
Adds srst2 to your path
Version: 0.2.0
"
}

module-whatis "Adds srst2 to your path\n"
module-whatis "Provides: srst2 getmlst.py slurm_srst2.py"

module load apptainer

proc make_alias {name} {
    set cmd "apptainer --quiet exec \$GROUP_HOME/containers/srst2.sif $name \$*"
    set-alias $name $cmd
}

foreach cmd {srst2 getmlst.py slurm_srst2.py} {
    make_alias $cmd
}

set basedir [getenv "MODULE_BASEDIR"]
if { $basedir eq "" } {
    puts stderr "Error: MODULE_BASEDIR environment variable is not set."
    exit 1
}

# "The downloaded directory also contains things that might be useful for SRST2 users:"
setenv SRST2_DATA                   "${basedir}/srst2/0.2.0/srst2/data"
setenv SRST2_DATABASE_CLUSTERING    "${basedir}/srst2/0.2.0/srst2/database_clustering"